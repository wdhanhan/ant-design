{"version":3,"sources":["node_modules/@codesandbox/sandpack-client/dist/clients/node/index.mjs"],"sourcesContent":["import { _ as __awaiter, a as __generator, n as nullthrows, c as createError, g as __extends, h as __assign } from '../../utils-52664384.mjs';\nimport { INJECT_MESSAGE_TYPE, Nodebox, PREVIEW_LOADED_MESSAGE_TYPE } from '@codesandbox/nodebox';\nimport { S as SandpackClient } from '../../base-80a1f760.mjs';\nimport { c as consoleHook, f as fromBundlerFilesToFS, r as readBuffer, w as writeBuffer, g as generateRandomId, E as EventEmitter, a as getMessageFromError, b as findStartScriptPackageJson } from '../../consoleHook-59e792cb.mjs';\nimport 'outvariant';\nimport 'dequal';\n\nfunction loadPreviewIframe(iframe, url) {\n    return __awaiter(this, void 0, void 0, function () {\n        var contentWindow, TIME_OUT, MAX_MANY_TIRES, tries, timeout;\n        return __generator(this, function (_a) {\n            contentWindow = iframe.contentWindow;\n            nullthrows(contentWindow, \"Failed to await preview iframe: no content window found\");\n            TIME_OUT = 90000;\n            MAX_MANY_TIRES = 20;\n            tries = 0;\n            return [2 /*return*/, new Promise(function (resolve, reject) {\n                    var triesToSetUrl = function () {\n                        var onLoadPage = function () {\n                            clearTimeout(timeout);\n                            tries = MAX_MANY_TIRES;\n                            resolve();\n                            iframe.removeEventListener(\"load\", onLoadPage);\n                        };\n                        if (tries >= MAX_MANY_TIRES) {\n                            reject(createError(\"Could not able to connect to preview.\"));\n                            return;\n                        }\n                        iframe.setAttribute(\"src\", url);\n                        timeout = setTimeout(function () {\n                            triesToSetUrl();\n                            iframe.removeEventListener(\"load\", onLoadPage);\n                        }, TIME_OUT);\n                        tries = tries + 1;\n                        iframe.addEventListener(\"load\", onLoadPage);\n                    };\n                    iframe.addEventListener(\"error\", function () { return reject(new Error(\"Iframe error\")); });\n                    iframe.addEventListener(\"abort\", function () { return reject(new Error(\"Aborted\")); });\n                    triesToSetUrl();\n                })];\n        });\n    });\n}\nvar setPreviewIframeProperties = function (iframe, options) {\n    iframe.style.border = \"0\";\n    iframe.style.width = options.width || \"100%\";\n    iframe.style.height = options.height || \"100%\";\n    iframe.style.overflow = \"hidden\";\n    iframe.allow = \"cross-origin-isolated\";\n};\n\n/* eslint-disable @typescript-eslint/ban-ts-comment, @typescript-eslint/explicit-function-return-type, no-restricted-globals, @typescript-eslint/no-explicit-any  */\nfunction setupHistoryListeners(_a) {\n    var scope = _a.scope;\n    // @ts-ignore\n    var origHistoryProto = window.history.__proto__;\n    var historyList = [];\n    var historyPosition = 0;\n    var dispatchMessage = function (url) {\n        parent.postMessage({\n            type: \"urlchange\",\n            url: url,\n            back: historyPosition > 0,\n            forward: historyPosition < historyList.length - 1,\n            channelId: scope.channelId,\n        }, \"*\");\n    };\n    function pushHistory(url, state) {\n        // remove \"future\" locations\n        historyList.splice(historyPosition + 1);\n        historyList.push({ url: url, state: state });\n        historyPosition = historyList.length - 1;\n    }\n    Object.assign(window.history, {\n        go: function (delta) {\n            var newPos = historyPosition + delta;\n            if (newPos >= 0 && newPos <= historyList.length - 1) {\n                historyPosition = newPos;\n                var _a = historyList[historyPosition], url = _a.url, state = _a.state;\n                origHistoryProto.replaceState.call(window.history, state, \"\", url);\n                var newURL = document.location.href;\n                dispatchMessage(newURL);\n                window.dispatchEvent(new PopStateEvent(\"popstate\", { state: state }));\n            }\n        },\n        back: function () {\n            window.history.go(-1);\n        },\n        forward: function () {\n            window.history.go(1);\n        },\n        pushState: function (state, title, url) {\n            origHistoryProto.replaceState.call(window.history, state, title, url);\n            pushHistory(url, state);\n            dispatchMessage(document.location.href);\n        },\n        replaceState: function (state, title, url) {\n            origHistoryProto.replaceState.call(window.history, state, title, url);\n            historyList[historyPosition] = { state: state, url: url };\n            dispatchMessage(document.location.href);\n        },\n    });\n    function handleMessage(_a) {\n        var data = _a.data;\n        if (data.type === \"urlback\") {\n            history.back();\n        }\n        else if (data.type === \"urlforward\") {\n            history.forward();\n        }\n        else if (data.type === \"refresh\") {\n            document.location.reload();\n        }\n    }\n    window.addEventListener(\"message\", handleMessage);\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nfunction watchResize(_a) {\n    var scope = _a.scope;\n    var lastHeight = 0;\n    function getDocumentHeight() {\n        if (typeof window === \"undefined\")\n            return 0;\n        var body = document.body;\n        var html = document.documentElement;\n        return Math.max(body.scrollHeight, body.offsetHeight, html.offsetHeight);\n    }\n    function sendResizeEvent() {\n        var height = getDocumentHeight();\n        if (lastHeight !== height) {\n            window.parent.postMessage({\n                type: \"resize\",\n                height: height,\n                codesandbox: true,\n                channelId: scope.channelId,\n            }, \"*\");\n        }\n        lastHeight = height;\n    }\n    sendResizeEvent();\n    var throttle;\n    var observer = new MutationObserver(function () {\n        if (throttle === undefined) {\n            sendResizeEvent();\n            throttle = setTimeout(function () {\n                throttle = undefined;\n            }, 300);\n        }\n    });\n    observer.observe(document, {\n        attributes: true,\n        childList: true,\n        subtree: true,\n    });\n    /**\n     * Ideally we should only use a `MutationObserver` to trigger a resize event,\n     * however, we noted that it's not 100% reliable, so we went for polling strategy as well\n     */\n    setInterval(sendResizeEvent, 300);\n}\n\n/* eslint-disable @typescript-eslint/ban-ts-comment */\nvar scripts = [\n    { code: setupHistoryListeners.toString(), id: \"historyListener\" },\n    {\n        code: \"function consoleHook({ scope }) {\" + consoleHook + \"\\n};\",\n        id: \"consoleHook\",\n    },\n    { code: watchResize.toString(), id: \"watchResize\" },\n];\nvar injectScriptToIframe = function (iframe, channelId) {\n    scripts.forEach(function (_a) {\n        var _b;\n        var code = _a.code, id = _a.id;\n        var message = {\n            uid: id,\n            type: INJECT_MESSAGE_TYPE,\n            code: \"exports.activate = \".concat(code),\n            scope: { channelId: channelId },\n        };\n        (_b = iframe.contentWindow) === null || _b === void 0 ? void 0 : _b.postMessage(message, \"*\");\n    });\n};\n\n/* eslint-disable no-console,@typescript-eslint/no-explicit-any,prefer-rest-params,@typescript-eslint/explicit-module-boundary-types */\nvar SandpackNode = /** @class */ (function (_super) {\n    __extends(SandpackNode, _super);\n    function SandpackNode(selector, sandboxInfo, options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this, selector, sandboxInfo, __assign(__assign({}, options), { bundlerURL: options.bundlerURL })) || this;\n        _this._modulesCache = new Map();\n        _this.messageChannelId = generateRandomId();\n        _this._initPromise = null;\n        _this.emitter = new EventEmitter();\n        // Assign iframes\n        _this.manageIframes(selector);\n        // Init emulator\n        _this.emulator = new Nodebox({\n            iframe: _this.emulatorIframe,\n            runtimeUrl: _this.options.bundlerURL,\n        });\n        // Trigger initial compile\n        _this.updateSandbox(sandboxInfo);\n        return _this;\n    }\n    // Initialize nodebox, should only ever be called once\n    SandpackNode.prototype._init = function (files) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.emulator.connect()];\n                    case 1:\n                        _a.sent();\n                        // 2. Setup\n                        return [4 /*yield*/, this.emulator.fs.init(files)];\n                    case 2:\n                        // 2. Setup\n                        _a.sent();\n                        // 2.1 Other dependencies\n                        return [4 /*yield*/, this.globalListeners()];\n                    case 3:\n                        // 2.1 Other dependencies\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * It initializes the emulator and provide it with files, template and script to run\n     */\n    SandpackNode.prototype.compile = function (files) {\n        return __awaiter(this, void 0, void 0, function () {\n            var shellId, err_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 5, , 6]);\n                        // 1. Init\n                        this.status = \"initializing\";\n                        this.dispatch({ type: \"start\", firstLoad: true });\n                        if (!this._initPromise) {\n                            this._initPromise = this._init(files);\n                        }\n                        return [4 /*yield*/, this._initPromise];\n                    case 1:\n                        _a.sent();\n                        this.dispatch({ type: \"connected\" });\n                        return [4 /*yield*/, this.createShellProcessFromTask(files)];\n                    case 2:\n                        shellId = (_a.sent()).id;\n                        // 4. Launch Preview\n                        return [4 /*yield*/, this.createPreviewURLFromId(shellId)];\n                    case 3:\n                        // 4. Launch Preview\n                        _a.sent();\n                        return [4 /*yield*/, this.setLocationURLIntoIFrame()];\n                    case 4:\n                        _a.sent();\n                        // 5. Returns to consumer\n                        this.dispatchDoneMessage();\n                        return [3 /*break*/, 6];\n                    case 5:\n                        err_1 = _a.sent();\n                        this.dispatch({\n                            type: \"action\",\n                            action: \"notification\",\n                            notificationType: \"error\",\n                            title: getMessageFromError(err_1),\n                        });\n                        this.dispatch({ type: \"done\", compilatonError: true });\n                        return [3 /*break*/, 6];\n                    case 6: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * It creates a new shell and run the starting task\n     */\n    SandpackNode.prototype.createShellProcessFromTask = function (files) {\n        return __awaiter(this, void 0, void 0, function () {\n            var packageJsonContent;\n            var _a;\n            var _this = this;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        packageJsonContent = readBuffer(files[\"/package.json\"]);\n                        this.emulatorCommand = findStartScriptPackageJson(packageJsonContent);\n                        this.emulatorShellProcess = this.emulator.shell.create();\n                        // Shell listeners\n                        return [4 /*yield*/, this.emulatorShellProcess.on(\"exit\", function (exitCode) {\n                                _this.dispatch({\n                                    type: \"action\",\n                                    action: \"notification\",\n                                    notificationType: \"error\",\n                                    title: createError(\"Error: process.exit(\".concat(exitCode, \") called.\")),\n                                });\n                            })];\n                    case 1:\n                        // Shell listeners\n                        _b.sent();\n                        return [4 /*yield*/, this.emulatorShellProcess.on(\"progress\", function (data) {\n                                var _a, _b;\n                                if (data.state === \"command_running\" ||\n                                    data.state === \"starting_command\") {\n                                    _this.dispatch({\n                                        type: \"shell/progress\",\n                                        data: __assign(__assign({}, data), { command: [\n                                                (_a = _this.emulatorCommand) === null || _a === void 0 ? void 0 : _a[0],\n                                                (_b = _this.emulatorCommand) === null || _b === void 0 ? void 0 : _b[1].join(\" \"),\n                                            ].join(\" \") }),\n                                    });\n                                    _this.status = \"installing-dependencies\";\n                                    return;\n                                }\n                                _this.dispatch({ type: \"shell/progress\", data: data });\n                            })];\n                    case 2:\n                        _b.sent();\n                        this.emulatorShellProcess.stdout.on(\"data\", function (data) {\n                            _this.dispatch({ type: \"stdout\", payload: { data: data, type: \"out\" } });\n                        });\n                        this.emulatorShellProcess.stderr.on(\"data\", function (data) {\n                            _this.dispatch({ type: \"stdout\", payload: { data: data, type: \"err\" } });\n                        });\n                        return [4 /*yield*/, (_a = this.emulatorShellProcess).runCommand.apply(_a, this.emulatorCommand)];\n                    case 3: return [2 /*return*/, _b.sent()];\n                }\n            });\n        });\n    };\n    SandpackNode.prototype.createPreviewURLFromId = function (id) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            var url;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        this.iframePreviewUrl = undefined;\n                        return [4 /*yield*/, this.emulator.preview.getByShellId(id)];\n                    case 1:\n                        url = (_b.sent()).url;\n                        this.iframePreviewUrl = url + ((_a = this.options.startRoute) !== null && _a !== void 0 ? _a : \"\");\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Nodebox needs to handle two types of iframes at the same time:\n     *\n     * 1. Runtime iframe: where the emulator process runs, which is responsible\n     *    for creating the other iframes (hidden);\n     * 2. Preview iframes: any other node process that contains a PORT (public);\n     */\n    SandpackNode.prototype.manageIframes = function (selector) {\n        var _a;\n        /**\n         * Pick the preview iframe\n         */\n        if (typeof selector === \"string\") {\n            var element = document.querySelector(selector);\n            nullthrows(element, \"The element '\".concat(selector, \"' was not found\"));\n            this.iframe = document.createElement(\"iframe\");\n            element === null || element === void 0 ? void 0 : element.appendChild(this.iframe);\n        }\n        else {\n            this.iframe = selector;\n        }\n        // Set preview iframe styles\n        setPreviewIframeProperties(this.iframe, this.options);\n        nullthrows(this.iframe.parentNode, \"The given iframe does not have a parent.\");\n        /**\n         * Create the runtime iframe, which is hidden sibling\n         * from the preview one\n         */\n        this.emulatorIframe = document.createElement(\"iframe\");\n        this.emulatorIframe.classList.add(\"sp-bridge-frame\");\n        (_a = this.iframe.parentNode) === null || _a === void 0 ? void 0 : _a.appendChild(this.emulatorIframe);\n    };\n    SandpackNode.prototype.setLocationURLIntoIFrame = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.iframePreviewUrl) return [3 /*break*/, 2];\n                        return [4 /*yield*/, loadPreviewIframe(this.iframe, this.iframePreviewUrl)];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Send all messages and events to tell to the\n     * consumer that the bundler is ready without any error\n     */\n    SandpackNode.prototype.dispatchDoneMessage = function () {\n        this.status = \"done\";\n        this.dispatch({ type: \"done\", compilatonError: false });\n        if (this.iframePreviewUrl) {\n            this.dispatch({\n                type: \"urlchange\",\n                url: this.iframePreviewUrl,\n                back: false,\n                forward: false,\n            });\n        }\n    };\n    SandpackNode.prototype.globalListeners = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        window.addEventListener(\"message\", function (event) {\n                            if (event.data.type === PREVIEW_LOADED_MESSAGE_TYPE) {\n                                injectScriptToIframe(_this.iframe, _this.messageChannelId);\n                            }\n                            if (event.data.type === \"urlchange\" &&\n                                event.data.channelId === _this.messageChannelId) {\n                                _this.dispatch({\n                                    type: \"urlchange\",\n                                    url: event.data.url,\n                                    back: event.data.back,\n                                    forward: event.data.forward,\n                                });\n                            }\n                            else if (event.data.channelId === _this.messageChannelId) {\n                                _this.dispatch(event.data);\n                            }\n                        });\n                        return [4 /*yield*/, this.emulator.fs.watch([\"*\"], [\n                                \".next\",\n                                \"node_modules\",\n                                \"build\",\n                                \"dist\",\n                                \"vendor\",\n                                \".config\",\n                                \".vuepress\",\n                            ], function (message) { return __awaiter(_this, void 0, void 0, function () {\n                                var event, path, type, _a, content, newContent, err_2;\n                                return __generator(this, function (_b) {\n                                    switch (_b.label) {\n                                        case 0:\n                                            if (!message)\n                                                return [2 /*return*/];\n                                            event = message;\n                                            path = \"newPath\" in event\n                                                ? event.newPath\n                                                : \"path\" in event\n                                                    ? event.path\n                                                    : \"\";\n                                            return [4 /*yield*/, this.emulator.fs.stat(path)];\n                                        case 1:\n                                            type = (_b.sent()).type;\n                                            if (type !== \"file\")\n                                                return [2 /*return*/, null];\n                                            _b.label = 2;\n                                        case 2:\n                                            _b.trys.push([2, 10, , 11]);\n                                            _a = event.type;\n                                            switch (_a) {\n                                                case \"change\": return [3 /*break*/, 3];\n                                                case \"create\": return [3 /*break*/, 3];\n                                                case \"remove\": return [3 /*break*/, 5];\n                                                case \"rename\": return [3 /*break*/, 6];\n                                                case \"close\": return [3 /*break*/, 8];\n                                            }\n                                            return [3 /*break*/, 9];\n                                        case 3: return [4 /*yield*/, this.emulator.fs.readFile(event.path, \"utf8\")];\n                                        case 4:\n                                            content = _b.sent();\n                                            this.dispatch({\n                                                type: \"fs/change\",\n                                                path: event.path,\n                                                content: content,\n                                            });\n                                            this._modulesCache.set(event.path, writeBuffer(content));\n                                            return [3 /*break*/, 9];\n                                        case 5:\n                                            this.dispatch({\n                                                type: \"fs/remove\",\n                                                path: event.path,\n                                            });\n                                            this._modulesCache.delete(event.path);\n                                            return [3 /*break*/, 9];\n                                        case 6:\n                                            this.dispatch({\n                                                type: \"fs/remove\",\n                                                path: event.oldPath,\n                                            });\n                                            this._modulesCache.delete(event.oldPath);\n                                            return [4 /*yield*/, this.emulator.fs.readFile(event.newPath, \"utf8\")];\n                                        case 7:\n                                            newContent = _b.sent();\n                                            this.dispatch({\n                                                type: \"fs/change\",\n                                                path: event.newPath,\n                                                content: newContent,\n                                            });\n                                            this._modulesCache.set(event.newPath, writeBuffer(newContent));\n                                            return [3 /*break*/, 9];\n                                        case 8: return [3 /*break*/, 9];\n                                        case 9: return [3 /*break*/, 11];\n                                        case 10:\n                                            err_2 = _b.sent();\n                                            this.dispatch({\n                                                type: \"action\",\n                                                action: \"notification\",\n                                                notificationType: \"error\",\n                                                title: getMessageFromError(err_2),\n                                            });\n                                            return [3 /*break*/, 11];\n                                        case 11: return [2 /*return*/];\n                                    }\n                                });\n                            }); })];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * PUBLIC Methods\n     */\n    SandpackNode.prototype.restartShellProcess = function () {\n        var _a;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!(this.emulatorShellProcess && this.emulatorCommand)) return [3 /*break*/, 3];\n                        // 1. Set the loading state and clean the URL\n                        this.dispatch({ type: \"start\", firstLoad: true });\n                        this.status = \"initializing\";\n                        // 2. Exit shell\n                        return [4 /*yield*/, this.emulatorShellProcess.kill()];\n                    case 1:\n                        // 2. Exit shell\n                        _b.sent();\n                        (_a = this.iframe) === null || _a === void 0 ? void 0 : _a.removeAttribute(\"attr\");\n                        this.emulator.fs.rm(\"/node_modules/.vite\", {\n                            recursive: true,\n                            force: true,\n                        });\n                        // 3 Run command again\n                        return [4 /*yield*/, this.compile(Object.fromEntries(this._modulesCache))];\n                    case 2:\n                        // 3 Run command again\n                        _b.sent();\n                        _b.label = 3;\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SandpackNode.prototype.updateSandbox = function (setup) {\n        var _this = this;\n        var _a;\n        var modules = fromBundlerFilesToFS(setup.files);\n        /**\n         * Update file changes\n         */\n        if (((_a = this.emulatorShellProcess) === null || _a === void 0 ? void 0 : _a.state) === \"running\") {\n            Object.entries(modules).forEach(function (_a) {\n                var key = _a[0], value = _a[1];\n                if (!_this._modulesCache.get(key) ||\n                    readBuffer(value) !== readBuffer(_this._modulesCache.get(key))) {\n                    _this.emulator.fs.writeFile(key, value, { recursive: true });\n                }\n            });\n            return;\n        }\n        /**\n         * Pass init files to the bundler\n         */\n        this.dispatch({\n            codesandbox: true,\n            modules: modules,\n            template: setup.template,\n            type: \"compile\",\n        });\n        /**\n         * Add modules to cache, this will ensure uniqueness changes\n         *\n         * Keep it after the compile action, in order to update the cache at the right moment\n         */\n        Object.entries(modules).forEach(function (_a) {\n            var key = _a[0], value = _a[1];\n            _this._modulesCache.set(key, writeBuffer(value));\n        });\n    };\n    SandpackNode.prototype.dispatch = function (message) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function () {\n            var _c;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        _c = message.type;\n                        switch (_c) {\n                            case \"compile\": return [3 /*break*/, 1];\n                            case \"refresh\": return [3 /*break*/, 2];\n                            case \"urlback\": return [3 /*break*/, 4];\n                            case \"urlforward\": return [3 /*break*/, 4];\n                            case \"shell/restart\": return [3 /*break*/, 5];\n                            case \"shell/openPreview\": return [3 /*break*/, 6];\n                        }\n                        return [3 /*break*/, 7];\n                    case 1:\n                        this.compile(message.modules);\n                        return [3 /*break*/, 8];\n                    case 2: return [4 /*yield*/, this.setLocationURLIntoIFrame()];\n                    case 3:\n                        _d.sent();\n                        return [3 /*break*/, 8];\n                    case 4:\n                        (_b = (_a = this.iframe) === null || _a === void 0 ? void 0 : _a.contentWindow) === null || _b === void 0 ? void 0 : _b.postMessage(message, \"*\");\n                        return [3 /*break*/, 8];\n                    case 5:\n                        this.restartShellProcess();\n                        return [3 /*break*/, 8];\n                    case 6:\n                        window.open(this.iframePreviewUrl, \"_blank\");\n                        return [3 /*break*/, 8];\n                    case 7:\n                        this.emitter.dispatch(message);\n                        _d.label = 8;\n                    case 8: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SandpackNode.prototype.listen = function (listener) {\n        return this.emitter.listener(listener);\n    };\n    SandpackNode.prototype.destroy = function () {\n        this.emulatorIframe.remove();\n        this.emitter.cleanup();\n    };\n    return SandpackNode;\n}(SandpackClient));\n\nexport { SandpackNode };\n"],"names":[],"mappings":"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"}