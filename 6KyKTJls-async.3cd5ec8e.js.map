{"version":3,"sources":["components/select/demo/search-box.tsx?techStack=react"],"sourcesContent":["import '/Users/vagusx/Projects/ant-design/components/select/demo/search-box.tsx?watch=parent';import React, { useState } from 'react';\nimport { Select } from 'antd';\nimport type { SelectProps } from 'antd';\nimport jsonp from 'fetch-jsonp';\nimport qs from 'qs';\n\nlet timeout: ReturnType<typeof setTimeout> | null;\nlet currentValue: string;\n\nconst fetch = (value: string, callback: (data: { value: string; text: string }[]) => void) => {\n  if (timeout) {\n    clearTimeout(timeout);\n    timeout = null;\n  }\n  currentValue = value;\n\n  const fake = () => {\n    const str = qs.stringify({\n      code: 'utf-8',\n      q: value,\n    });\n    jsonp(`https://suggest.taobao.com/sug?${str}`)\n      .then((response: any) => response.json())\n      .then((d: any) => {\n        if (currentValue === value) {\n          const { result } = d;\n          const data = result.map((item: any) => ({\n            value: item[0],\n            text: item[0],\n          }));\n          callback(data);\n        }\n      });\n  };\n  if (value) {\n    timeout = setTimeout(fake, 300);\n  } else {\n    callback([]);\n  }\n};\n\nconst SearchInput: React.FC<{ placeholder: string; style: React.CSSProperties }> = (props) => {\n  const [data, setData] = useState<SelectProps['options']>([]);\n  const [value, setValue] = useState<string>();\n\n  const handleSearch = (newValue: string) => {\n    fetch(newValue, setData);\n  };\n\n  const handleChange = (newValue: string) => {\n    setValue(newValue);\n  };\n\n  return (\n    <Select\n      showSearch\n      value={value}\n      placeholder={props.placeholder}\n      style={props.style}\n      defaultActiveFirstOption={false}\n      suffixIcon={null}\n      filterOption={false}\n      onSearch={handleSearch}\n      onChange={handleChange}\n      notFoundContent={null}\n      options={(data || []).map((d) => ({\n        value: d.value,\n        label: d.text,\n      }))}\n    />\n  );\n};\n\nconst App: React.FC = () => <SearchInput placeholder=\"input search text\" style={{ width: 200 }} />;\n\nexport default App;\n"],"names":[],"mappings":"sMAMI,EACA,uCAoEJ,+CAAA,4CA3EO,oBAAuH,gBACvG,oBAEL,qBACH,aAKf,IAAM,EAAQ,CAAC,EAAe,KACxB,IACF,aAAa,GACb,EAAU,MAEZ,EAAe,EAoBX,EACF,EAAU,WAnBC,KACX,IAAM,EAAM,SAAE,CAAC,SAAS,CAAC,CACvB,KAAM,QACN,EAAG,CACL,GACA,GAAA,SAAK,EAAC,CAAC,+BAA+B,EAAE,EAAI,CAAC,EAC1C,IAAI,CAAC,AAAC,GAAkB,EAAS,IAAI,IACrC,IAAI,CAAC,AAAC,IACL,GAAI,IAAiB,EAAO,CAC1B,GAAM,CAAE,OAAA,CAAM,CAAE,CAAG,EACb,EAAO,EAAO,GAAG,CAAC,AAAC,GAAe,CAAA,CACtC,MAAO,CAAI,CAAC,EAAE,CACd,KAAM,CAAI,CAAC,EAAE,AACf,CAAA,GACA,EAAS,GACX,CACF,GACJ,EAE6B,KAE3B,EAAS,EAAE,EAEf,EAEM,EAA6E,AAAC,IAClF,GAAM,CAAC,EAAM,EAAQ,CAAG,GAAA,UAAQ,EAAyB,EAAE,EACrD,CAAC,EAAO,EAAS,CAAG,GAAA,UAAQ,IAUlC,MACE,UAAC,QAAM,EACL,UAAU,IACV,MAAO,EACP,YAAa,EAAM,WAAW,CAC9B,MAAO,EAAM,KAAK,CAClB,yBAA0B,CAAA,EAC1B,WAAY,KACZ,aAAc,CAAA,EACd,SAjBiB,AAAC,IACpB,EAAM,EAAU,GAClB,EAgBI,SAdiB,AAAC,IACpB,EAAS,GACX,EAaI,gBAAiB,KACjB,QAAS,AAAC,CAAA,GAAQ,EAAE,AAAD,EAAG,GAAG,CAAC,AAAC,GAAO,CAAA,CAChC,MAAO,EAAE,KAAK,CACd,MAAO,EAAE,IAAI,AACf,CAAA,KAGN,MAIA,EAFsB,IAAM,UAAC,GAAY,YAAY,oBAAoB,MAAO,CAAE,MAAO,GAAI"}